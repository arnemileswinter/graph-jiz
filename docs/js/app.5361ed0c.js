(function(e){function n(n){for(var t,s,l=n[0],i=n[1],c=n[2],p=0,b=[];p<l.length;p++)s=l[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&b.push(o[s][0]),o[s]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);u&&u(n);while(b.length)b.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,n=0;n<a.length;n++){for(var r=a[n],t=!0,l=1;l<r.length;l++){var i=r[l];0!==o[i]&&(t=!1)}t&&(a.splice(n--,1),e=s(s.s=r[0]))}return e}var t={},o={app:0},a=[];function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,n,r){s.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,n){if(1&n&&(e=s(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)s.d(r,t,function(n){return e[n]}.bind(null,t));return r},s.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(n,"a",n),n},s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},s.p="https://arnemileswinter.github.io/graph-jiz/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=n,l=l.slice();for(var c=0;c<l.length;c++)n(l[c]);var u=i;a.push([0,"chunk-vendors"]),r()})({0:function(e,n,r){e.exports=r("56d7")},"034f":function(e,n,r){"use strict";var t=r("85ec"),o=r.n(t);o.a},"1d4a":function(e,n,r){"use strict";var t=r("96f6"),o=r.n(t);o.a},"20ce":function(e,n,r){r("99af"),r("a15b"),r("d81d");var t=r("448a");(function(){function n(e){return e[0]}var r={Lexer:void 0,ParserRules:[{name:"start",symbols:["_","connection","_","end","start"],postprocess:function(e){return e[4]?[e[1]].concat(t(e[4])):[e[1]]}},{name:"start",symbols:["_","lineComment","start"],postprocess:function(e){return e[2]}},{name:"start",symbols:["_"],postprocess:function(){return null}},{name:"end",symbols:[{literal:";"}],postprocess:function(){return null}},{name:"lineComment$ebnf$1",symbols:[]},{name:"lineComment$ebnf$1$subexpression$1",symbols:[/[^\n]/]},{name:"lineComment$ebnf$1",symbols:["lineComment$ebnf$1","lineComment$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"lineComment",symbols:[{literal:"#"},"lineComment$ebnf$1",{literal:"\n"}],postprocess:function(e){return{type:"lineComment",content:e[1].join("")}}},{name:"lineComment$string$1",symbols:[{literal:"/"},{literal:"/"}],postprocess:function(e){return e.join("")}},{name:"lineComment$ebnf$2",symbols:[]},{name:"lineComment$ebnf$2$subexpression$1",symbols:[/[^\n]/]},{name:"lineComment$ebnf$2",symbols:["lineComment$ebnf$2","lineComment$ebnf$2$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"lineComment",symbols:["lineComment$string$1","lineComment$ebnf$2",{literal:"\n"}],postprocess:function(e){return{type:"lineComment",content:e[1].join("")}}},{name:"connection",symbols:["connection","_","connector","_","labelledNode"],postprocess:function(e){return{type:"connection",connector:e[2],from:e[0],to:e[4]}}},{name:"connection",symbols:["labelledNode"],postprocess:n},{name:"labelledNode",symbols:["node","_","label"],postprocess:function(e){return{type:"node",name:e[0],label:e[2]}}},{name:"labelledNode",symbols:["node"],postprocess:function(e){return{type:"node",name:e[0],label:null}}},{name:"label",symbols:[{literal:"["},"labelContent",{literal:"]"}],postprocess:function(e){return e[1]}},{name:"label",symbols:[{literal:"["},{literal:"]"}],postprocess:function(e){return""}},{name:"labelContent",symbols:["labelCharacter"],postprocess:n},{name:"labelContent",symbols:["labelContent","labelCharacter"],postprocess:function(e){return e[0]+e[1]}},{name:"labelCharacter",symbols:[/[^\\\]]/],postprocess:n},{name:"labelCharacter",symbols:[{literal:"\\"},"labelCharacterEscape"],postprocess:function(e){return"\\"+e[1]}},{name:"labelCharacterEscape",symbols:[/./],postprocess:n},{name:"connector",symbols:["line"],postprocess:function(e){return{type:"line",length:e[0].length,label:null}}},{name:"connector",symbols:["line","label","line"],postprocess:function(e){return{type:"line",length:e[0].length+e[2].length,label:e[1]}}},{name:"connector",symbols:[{literal:"<"},"line"],postprocess:function(e){return{type:"left_arrow",length:e[1].length,label:null}}},{name:"connector",symbols:[{literal:"<"},"label","line"],postprocess:function(e){return{type:"left_arrow",length:e[2].length,label:e[1]}}},{name:"connector",symbols:[{literal:"<"},"line","label","line"],postprocess:function(e){return{type:"left_arrow",length:e[1].length+e[3].length,label:e[2]}}},{name:"connector",symbols:[{literal:"<"},"line",{literal:">"}],postprocess:function(e){return{type:"bi_arrow",length:e[1].length,label:null}}},{name:"connector",symbols:[{literal:"<"},"label",{literal:">"}],postprocess:function(e){return{type:"bi_arrow",length:0,label:e[1]}}},{name:"connector",symbols:[{literal:"<"},"line","label","line",{literal:">"}],postprocess:function(e){return{type:"bi_arrow",length:e[1].length+e[3].length,label:e[2]}}},{name:"connector",symbols:["line",{literal:">"}],postprocess:function(e){return{type:"right_arrow",length:e[0].length,label:null}}},{name:"connector",symbols:["line","label",{literal:">"}],postprocess:function(e){return{type:"right_arrow",length:e[0].length,label:e[1]}}},{name:"connector",symbols:["line","label","line",{literal:">"}],postprocess:function(e){return{type:"right_arrow",length:e[0].length+e[2].length,label:e[1]}}},{name:"line$ebnf$1",symbols:[/[-=]/]},{name:"line$ebnf$1",symbols:["line$ebnf$1",/[-=]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"line",symbols:["line$ebnf$1"],postprocess:n},{name:"node$ebnf$1$subexpression$1",symbols:[/[^\s\-<>=;\[\]\/#]/]},{name:"node$ebnf$1",symbols:["node$ebnf$1$subexpression$1"]},{name:"node$ebnf$1$subexpression$2",symbols:[/[^\s\-<>=;\[\]\/#]/]},{name:"node$ebnf$1",symbols:["node$ebnf$1","node$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"node",symbols:["node$ebnf$1"],postprocess:function(e){return e.map((function(e){return e.join("")})).join("")}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[\s]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:function(){return null}},{name:"__$ebnf$1",symbols:[/[\s]/]},{name:"__$ebnf$1",symbols:["__$ebnf$1",/[\s]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"__",symbols:["__$ebnf$1"],postprocess:function(){return null}}],ParserStart:"start"};"undefined"!==typeof e.exports?e.exports=r:window.grammar=r})()},"56d7":function(e,n,r){"use strict";r.r(n);r("e260"),r("e6cf"),r("cca6"),r("a79d");var t=r("2b0e"),o=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"app"},[r("ribbon",{attrs:{url:"https://github.com/arnemileswinter/graph-jiz",text:"Fork me on GitHub!"}}),r("div",{staticClass:"container"},[r("text-area",{attrs:{hasErrored:e.hasErrored,errorLine:e.errorLine,errorCol:e.errorCol},on:{change:e.onMarkupChange}}),r("graph",{attrs:{markup:e.markup},on:{parseError:e.onParseError}})],1)],1)},a=[],s=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},l=[function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"text-area"},[r("div",{staticClass:"right-spacer"})])}],i=(r("a9e3"),r("56b3")),c=r.n(i),u=(r("a7be"),'# Welcome to GraphJiz, a minimal DOT alternative with a sleek syntax and math support.\n#\n# There are 4 connection types supported:\n#\n# Left to right: nodeA => nodeB ====> nodeC;\n# Right to left: nodeA <- nodeB <---- nodeC;\n# Bidirectional: nodeA <=> nodeB <--\x3e nodeC;\n# Lines:         nodeA === nodeB ---- nodeC;\n#\n# Arrows may be arbitrarily long.\n#\n# Nodes may be labelled on their own: myNode[Has a cool label!];\n# Or within connections: myNode [has a cool label!] -> nodeB [is a cool node!];\n#\n# Edges are labeled inside their declarations, e.g.\n# \tjohn -[likes]-> jane -[hates]-> carl -[likes]-> john;\n#\n# If a nodes\' or edges\' label is already declared, more labels are added on a new line.\n# \tjohn [likes graphs];\n#\tjohn [hates carl];\n#\n# You can add comments with a leading "#" or "//".\n# Each statement must be terminated by a ;\n# Statements may span multiple lines.\n#\n# Labels are evaluated using MathJax, therefore you can use a subset of LaTeX-Math within $ dollar signs $.\n#\n# credits:\n#  - for language parsing    https://nearley.js.org/\n#  - for graph visualization https://visjs.org/\n#  - for this textbox        https://codemirror.net/\n\nflowers <-[are]- roses -[are]-> red;\nflowers <-[are]- violets -[are]-> blue;\n\nred --\x3e violets;\n\nblue -[what is a decimal approximation of]> theSquareRootOfTwo [$\\sqrt{2}$];\ntheSquareRootOfTwo[$1.41421356237 ...$];\n'),p={props:{hasErrored:{type:Boolean,required:!0},errorLine:{type:Number,required:!0},errorCol:{type:Number,required:!0}},data:function(){return{codeMirror:null,errorMarker:null}},methods:{onCodeMirrorChange:function(){this.$emit("change",this.codeMirror.doc.getValue())},updateErrorMarker:function(){this.errorMarker&&this.errorMarker.clear(),this.hasErrored&&(this.errorMarker=this.codeMirror.doc.markText({line:this.errorLine-1,ch:this.errorCol-1},{line:this.errorLine-1,ch:this.errorCol},{className:"syntax"}))}},mounted:function(){var e=c()(this.$el,{lineNumbers:!0});e.setSize("100%","100%"),e.on("change",this.onCodeMirrorChange),this.codeMirror=e,e.doc.setValue(u)},watch:{errorLine:function(){this.updateErrorMarker()},errorCol:function(){this.updateErrorMarker()},hasErrored:function(){this.updateErrorMarker()}}},b=p,m=(r("1d4a"),r("2877")),h=Object(m["a"])(b,s,l,!1,null,null,null),f=h.exports,d=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},g=[function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{ref:"graph",staticClass:"graph"})}],y=(r("4160"),r("d81d"),r("b0c0"),r("ac1f"),r("1276"),r("2ca0"),r("159b"),r("b85c")),$=r("5530"),v=r("59a4"),w=(r("b64b"),r("ac55")),C=r.n(w),_=r("20ce"),k=r.n(_),j=function(e){var n={},r={},t=function(e){n[e.name]=n[e.name]||{labels:{}};var r=n[e.name];return e.label&&(r.labels[e.label]=!0),e.name},o=function(e,n,t){var o;switch(e.type){case"left_arrow":o="<"+n+";"+t;break;case"right_arrow":o=">"+n+";"+t;break;case"bi_arrow":o=":"+n+";"+t;break;case"line":o="-"+n+";"+t;break;default:throw new Error('Unknown connection type "'+e.type+'"!')}r[o]=r[o]||{length:e.length,labels:{}};var a=r[o];e.label&&(a.labels[e.label]=!0)},a=function e(n){var r,a,s=Object(y["a"])(n);try{for(s.s();!(a=s.n()).done;){var l=a.value;if("node"===l.type&&(r=t(l)),"connection"===l.type){var i=e([l.from]),c=e([l.to]);o(l.connector,i,c),r=c}}}catch(u){s.e(u)}finally{s.f()}return r};a(e);var s=[];Object.keys(n).forEach((function(e){var r=n[e];s.push({name:e,labels:Object.keys(r.labels)})}));var l=[];return Object.keys(r).forEach((function(e){var n=e.substring(1).split(";"),t=n[0],o=n[1],a=r[e];switch(e.charAt(0)){case">":l.push({from:t,to:o,labels:Object.keys(a.labels),length:a.length,variant:"arrow"});break;case"<":l.push({from:o,to:t,labels:Object.keys(a.labels),length:a.length,variant:"arrow"});break;case":":l.push({from:t,to:o,labels:Object.keys(a.labels),length:a.length,variant:"arrow"}),l.push({from:o,to:t,labels:Object.keys(a.labels),length:a.length,variant:"arrow"});break;case"-":l.push({from:t,to:o,labels:Object.keys(a.labels),length:a.length,variant:"line"}),l.push({from:o,to:t,labels:Object.keys(a.labels),length:a.length,variant:"line"})}})),{nodes:s,connections:l}},x=function(e){var n=new C.a.Parser(C.a.Grammar.fromCompiled(k.a));if(n.feed(e),n.results.length>1)throw console.error(n.results),new Error("Fatal: ambiguos grammar error! Tell the developers...");if(0===n.results.length)throw new Error("Error: Input was not parsed.");var r=n.results[0];return j(r)},E=(r("a15b"),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=window.MathJax;if(!r)throw new Error("Mathjax is not imported!");var t=0===e.length?"\\textsf{ "+n+" }":"\\begin{align*} "+e.map((function(e){return e.split("\n").map((function(e){return"& \\textsf{ "+e+" } "})).join("\\\\")})).join("\\\\")+"\\end{align*}",o=r.tex2svg(t).children[0],a=document.createElement("style");return a.innerHTML="svg {background-color: white; position: fixed; }",o.appendChild(a),o.outerHTML}),O={data:function(){return{parsed:[],nodeData:[],network:null,nodePositions:{}}},props:{markup:{type:String,required:!0}},watch:{markup:function(){try{this.parsed=x(this.markup),this.drawGraph()}catch(o){this.parsed=[];var e=""+o.message;if(e.startsWith("Syntax")){var n=e.split("\n")[0],r=parseInt(n.split("line ",2)[1].split(" ",2)[0]),t=parseInt(n.split("col ",2)[1].split(":",2)[0]);this.$emit("parseError",{type:"syntax-error",line:r,col:t})}}}},methods:{fetchGraphVizNodes:function(){var e=this;return new v["a"](this.parsed.nodes.map((function(n){var r=e.nodePositions[n.name]||{};return Object($["a"])(Object($["a"])({},r),{},{id:n.name,color:{border:"#000",background:"white",highlight:{background:"white"}},shape:"image",image:"data:image/svg+xml;base64,"+btoa(E(n.labels,n.name)),imagePadding:{top:5,left:5,right:5,bottom:5},shapeProperties:{useImageSize:!0,useBorderWithImage:!0}})})))},fetchGraphVizEdges:function(){return new v["a"](this.parsed.connections.map((function(e){var n={};return"arrow"===e.variant&&(n.arrows={to:{enabled:!0}}),e.labels.length>0&&(n.arrows=Object($["a"])(Object($["a"])({},n.arrows),{},{middle:{enabled:!0,src:"data:image/svg+xml;base64,"+btoa(E(e.labels)),type:"image"}})),n=Object($["a"])(Object($["a"])({},n),{},{from:e.from,to:e.to,color:{color:"#000",opacity:1,highlight:"#000"},selectionWidth:0,length:100*e.length,smooth:{type:"discrete"}}),n})))},cacheNodePosition:function(e){var n=this.network.getPosition(e),r=n.x,t=n.y;this.nodePositions[e]={x:r,y:t}},cacheNodePositions:function(){var e=this;this.parsed.nodes.forEach((function(n){e.cacheNodePosition(n.name)}))},drawGraph:function(){var e=this,n=this.fetchGraphVizNodes(),r=this.fetchGraphVizEdges(),t={nodes:n,edges:r},o=this.$refs.graph;o.innerHTML="";var a={physics:!1};this.network=new v["b"](o,t,a),this.network.on("dragEnd",(function(n){var r,t=Object(y["a"])(n.nodes);try{for(t.s();!(r=t.n()).done;){var o=r.value;e.cacheNodePosition(o)}}catch(a){t.e(a)}finally{t.f()}})),this.cacheNodePositions()}}},M=O,P=(r("f5ff"),Object(m["a"])(M,d,g,!1,null,null,null)),N=P.exports,L=r("a5bc"),T={components:{TextArea:f,Graph:N,Ribbon:L["a"]},data:function(){return{markup:"",hasErrored:!1,errorLine:-1,errorCol:-1}},methods:{onMarkupChange:function(e){this.hasErrored=!1,this.markup=e},onParseError:function(e){this.errorLine=e.line,this.errorCol=e.col,this.hasErrored=!0}}},S=T,z=(r("034f"),Object(m["a"])(S,o,a,!1,null,null,null)),G=z.exports;t["a"].config.productionTip=!1,new t["a"]({render:function(e){return e(G)}}).$mount("#app")},"85ec":function(e,n,r){},"96f6":function(e,n,r){},f234:function(e,n,r){},f5ff:function(e,n,r){"use strict";var t=r("f234"),o=r.n(t);o.a}});
//# sourceMappingURL=app.5361ed0c.js.map